<Page
    x:Class="AlwaysOnTop.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AlwaysOnTop"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--https://www.eternalcoding.com/uwptake-the-control-of-your-title-bar/-->
        <!--Background="Transparent" is needed to move window by using mouse-->
        <Grid Grid.Row="0" x:Name="TitleBar" Background="Transparent" Height="32">
            <TextBlock x:Name="TitleBlock" Text="Always on Top" VerticalAlignment="Center" HorizontalAlignment="Stretch" FontSize="12" Foreground="{ThemeResource ApplicationForegroundThemeBrush}" Margin="10,0"/>
        </Grid>

        <!--http://blog.mzikmund.com/2017/01/aligning-uwp-commandbar-content-after-anniversary-update/-->
        <CommandBar x:Name="CommBar" Grid.Row="1" IsDynamicOverflowEnabled="False" HorizontalContentAlignment="Stretch" >
            <CommandBar.Content>
                <Grid HorizontalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox Grid.Column="0" x:Name="AddressBox" Text="{x:Bind BrowserWindow.Source}" PlaceholderText="Enter web address" InputScope="Url" Margin="4" HorizontalAlignment="Stretch" KeyDown="AddressBox_KeyDown"/>
                    <ProgressRing Grid.Column="1" x:Name="LoadingIndicator" IsActive="False" Width="68" Margin="0,4" Visibility="Collapsed"/>
                </Grid>
            </CommandBar.Content>
            <AppBarButton x:Name="RefreshButton" Label="Refresh" Icon="Refresh" Click="RefreshButton_Click"/>
            <AppBarButton x:Name="AOTButton" Label="Always on Top" Click="AOTButton_Click">
                <AppBarButton.Content>
                    <!--https://stackoverflow.com/questions/45692232/w10-uwp-compactoverlay-button-icon-->
                    <Grid>
                        <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,0,0,0" FontFamily="Segoe MDL2 Assets" FontSize="30">&#xE003;</TextBlock>
                        <TextBlock HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,5,2" FontFamily="Segoe MDL2 Assets" FontSize="16">&#xEB9F;</TextBlock>
                    </Grid>
                </AppBarButton.Content>
            </AppBarButton>
            <AppBarButton x:Name="BackButton" Label="Back" Click="BackButton_Click" Visibility="Collapsed">
                <AppBarButton.Content>
                    <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE2B4;" />
                </AppBarButton.Content>
            </AppBarButton>
            <CommandBar.SecondaryCommands>
                <AppBarToggleButton x:Name="MobileViewButton" Label="Mobile View" Icon="CellPhone" Click="MobileViewButton_Click"/>
                <AppBarButton x:Name="AboutButton" Label="About" Icon="Help" Click="AboutButton_Click"/>
                <AppBarButton/>
                <AppBarButton/>
                <AppBarButton/>
                <AppBarButton/>
                <AppBarButton/>
            </CommandBar.SecondaryCommands>
        </CommandBar>
        <WebView x:Name="BrowserWindow" Grid.Row="2" Margin="0" NavigationStarting="BrowserWindow_NavigationStarting" NavigationCompleted="BrowserWindow_NavigationCompleted" NavigationFailed="BrowserWindow_NavigationFailed" ContainsFullScreenElementChanged="BrowserWindow_ContainsFullScreenElementChanged"/>
    </Grid>
</Page>

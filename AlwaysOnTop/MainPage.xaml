<Page
    x:Class="AlwaysOnTop.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AlwaysOnTop"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--https://www.eternalcoding.com/uwptake-the-control-of-your-title-bar/-->
        <!--Background="Transparent" is needed to move window by using mouse-->
        <Grid Grid.Row="0" x:Name="TitleBar" Background="Transparent" Height="32">
            <TextBlock x:Name="TitleBlock" Text="Always on Top" VerticalAlignment="Center" HorizontalAlignment="Stretch" FontSize="12" Foreground="{ThemeResource ApplicationForegroundThemeBrush}" Margin="10,0"/>
        </Grid>

        <Grid x:Name="CommBar" Grid.Row="1" HorizontalAlignment="Stretch" Background="{StaticResource SystemBaseLowColor}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <ProgressRing Grid.Column="0" x:Name="LoadingIndicator" IsActive="False" Width="40.8" Margin="4,0" Visibility="Visible"/>
            <Button Grid.Column="0" x:Name="RefreshButton" Click="RefreshButton_Click" ToolTipService.ToolTip="Refresh" Background="Transparent" Margin="4,0">
                <Button.Content>
                    <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE72C;"/>
                </Button.Content>
            </Button>
            <TextBox Grid.Column="1" x:Name="AddressBox" PlaceholderText="Enter web address" InputScope="Url" Margin="4" HorizontalAlignment="Stretch" KeyDown="AddressBox_KeyDown"/>
            <Button Grid.Column="2" x:Name="AOTButton" Click="AOTButton_Click" ToolTipService.ToolTip="Always on Top" Background="Transparent" Margin="4,0">
                <Button.Content>
                    <!--https://stackoverflow.com/questions/45692232/w10-uwp-compactoverlay-button-icon-->
                    <Grid>
                        <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,0,0,0" FontFamily="Segoe MDL2 Assets" FontSize="20">&#xE003;</TextBlock>
                        <TextBlock HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,3,2" FontFamily="Segoe MDL2 Assets" FontSize="10">&#xEB9F;</TextBlock>
                    </Grid>
                </Button.Content>
            </Button>
            <Button Grid.Column="2" x:Name="BackButton" Click="BackButton_Click" Visibility="Collapsed" ToolTipService.ToolTip="Back" Background="Transparent" Margin="4,0">
                <Button.Content>
                    <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE2B4;" />
                </Button.Content>
            </Button>
            <Button Grid.Column="3" Background="Transparent" Margin="4,0" ToolTipService.ToolTip="More">
                <Button.Content>
                    <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE10C;" />
                </Button.Content>
                <Button.Flyout>
                    <MenuFlyout Placement="BottomEdgeAlignedRight">
                        <ToggleMenuFlyoutItem x:Name="MobileViewButton" Text="Mobile View" Icon="CellPhone" Click="MobileViewButton_Click"/>
                        <MenuFlyoutItem x:Name="AboutButton" Text="About" Icon="Help" Click="AboutButton_Click"/>
                    </MenuFlyout>
                </Button.Flyout>
            </Button>
        </Grid>

        <WebView x:Name="BrowserWindow" Grid.Row="2" Margin="0" NavigationStarting="BrowserWindow_NavigationStarting" NavigationCompleted="BrowserWindow_NavigationCompleted" NavigationFailed="BrowserWindow_NavigationFailed" ContainsFullScreenElementChanged="BrowserWindow_ContainsFullScreenElementChanged"/>
    </Grid>
</Page>
